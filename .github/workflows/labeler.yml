name: PR Labeler
true:
  pull_request_target:
    types:
    - opened
    - synchronize
    - reopened
    - edited
permissions:
  contents: read
  pull-requests: write
jobs:
  credit_check:
    uses: ./.github/workflows/actions-credit-guard-enhanced.yml
    with:
      estimated_minutes: 10
      threshold_percent: 3
      force_local: true
      fallback_runner: '["self-hosted","docker-swarm"]'
      slack_webhook: ${{ secrets.SLACK_WEBHOOK_URL }}
  label:
    runs-on: ${{ fromJson(needs.credit_check.outputs.runner) }}
    steps:
    - uses: actions/labeler@8558fd74291d67161a8a78ce36a881fa63b766a9
      with:
        repo-token: ${{ secrets.GITHUB_TOKEN }}
        configuration-path: .github/labeler.yml
    needs:
    - credit_check
